#!/usr/bin/env node
"use strict";var e;let t;Object.defineProperty(exports,"__esModule",{value:!0});const r=(e=require("yargs"))&&e.__esModule?e:{default:e},a=require("./builtin.js"),i=require("./cli.js"),s=r.default.usage("Usage: -e <command> -r <required> -o <optional>").option("e",{alias:"exec",describe:"Execute Command",type:"string",demandOption:!0}).option("r",{alias:"requiredParameter",default:"",describe:"Required Parameter",type:"string"}).option("o",{alias:"optionalParameter",default:"{}",describe:"Optional Parameter",type:"string"}).option("s",{alias:"saveOption",default:"",describe:"Save file for result(return)",type:"string"}).parseSync(),o={exec:s.e,requiredParameter:s.r,optionalParameter:s.o,saveOption:s.s},l=e=>{let[t="",r=""]=e.split(",");return[t,r]},n=(e,t,r="options.json||json||1")=>{let i=r.split("||").slice(1,3).join("||"),[s,o,l]=(t?t.split("||").length>1?t:`${t}||${i}`:r).split("||");switch(o){case"file":(0,a.saveFile)(s,e),l&&console.log(`${e}`);break;case"json":(0,a.saveJson)(s,e),l&&console.log(`${JSON.stringify(e)}`);break;case"sqlite":console.log(`saveSqlite: ${s}, ${e}`),l&&console.log(`${JSON.stringify(e)}`);break;default:console.log(`save type is not supported: ${o}`)}};switch(o.exec){case"init":n(t=(0,i.initApp)(o),o.saveOption??"","options.json||json||1");break;case"remove":(0,i.removeApp)(o);break;case"zip":let[p,u]=l(o.requiredParameter??",");n(t=(0,i.zip)(p,u),o.saveOption??"","options.json||json||1");break;case"tree":(0,i.tree)(o.requiredParameter??""),n(t,o.saveOption??"","result.txt||file||1");break;case"find":let[d,c]=l(o.requiredParameter??",");(0,a.findFiles)(d,c),n(t,o.saveOption??"","result.txt||file||1");break;case"del":let[m,f]=l(o.requiredParameter??",");n(t=(0,a.deleteFilesInFolder)(m,f,!0)??"",o.saveOption??"","result.txt||file||1");break;case"unzip":n(t=(0,i.unzip)(o.requiredParameter??""),o.saveOption??"","result.txt||file||1");break;default:console.log("Invalid command")}