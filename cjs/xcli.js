#!/usr/bin/env node
"use strict";var e;let t;Object.defineProperty(exports,"__esModule",{value:!0});const r=(e=require("yargs"))&&e.__esModule?e:{default:e},s=require("./builtin.js"),a=require("./cli.js"),i=r.default.usage("Usage: -e <command> -r <required> -o <optional>").option("e",{alias:"exec",describe:"Execute Command",type:"string",demandOption:!0}).option("r",{alias:"requiredParameter",default:"",describe:"Required Parameter",type:"string"}).option("o",{alias:"optionalParameter",default:"{}",describe:"Optional Parameter",type:"string"}).option("s",{alias:"saveOption",default:"",describe:"Save file for result(return)",type:"string"}).parseSync(),o={exec:i.e,requiredParameter:i.r,optionalParameter:i.o,saveOption:i.s},l=e=>{let[t="",r=""]=e.split(",");return[t,r]},n=(e,t,r="options.json||json||1")=>{let a=r.split("||").slice(1,3).join("||"),i=t?t.split("||").length>1?t:`${t}||${a}`:r;console.log(`@@@saveOption: ${i}`);let[o,l,n]=i.split("||");switch(l){case"file":(0,s.saveFile)(o,e),n&&console.log(`${e}`);break;case"json":(0,s.saveJson)(o,e),n&&console.log(`${JSON.stringify(e)}`);break;case"sqlite":console.log(`saveSqlite: ${o}, ${e}`),n&&console.log(`${JSON.stringify(e)}`);break;default:console.log(`save type is not supported: ${l}`)}};switch(o.exec){case"init":n(t=(0,a.initApp)(o),o.saveOption??"","options.json||json||1");break;case"remove":(0,a.removeApp)(o);break;case"zip":let[p,u]=l(o.requiredParameter??",");n(t=(0,a.zip)(p,u),o.saveOption??"","options.json||json||1");break;case"tree":(0,a.tree)(o.requiredParameter??""),n(t,o.saveOption??"","result.txt||file||1");break;case"find":let[d,c]=l(o.requiredParameter??",");(0,s.findFiles)(d,c),n(t,o.saveOption??"","result.txt||file||1");break;case"del":let[m,v]=l(o.requiredParameter??",");n(t=(0,s.deleteFilesInFolder)(m,v,!0)??"",o.saveOption??"","result.txt||file||1");break;case"unzip":let[f,b]=l(o.requiredParameter??",");n(t=(0,a.unzip)(f,b),o.saveOption??"","result.txt||file||1");break;default:console.log("Invalid command")}