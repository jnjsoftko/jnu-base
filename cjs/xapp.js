#!/usr/bin/env node
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=/*#__PURE__*/o(require("yargs")),t=require("child_process"),i=/*#__PURE__*/o(require("path")),n=require("./builtin"),s=require("./github");function o(e){return e&&e.__esModule?e:{default:e}}const a=`${process.env.DEV_CONFIG_ROOT}/Templates`??"C:/JnJ-soft/Developments/Templates",r="win32"===process.platform?"win":"darwin"===process.platform?"mac":"linux"===process.platform?"linux":process.platform,p=e.default.usage("Usage: -e <command> -u <userName> -t <template> -n <repoName> -d <description> -g").option("e",{alias:"exec",describe:"Execute Command",type:"string",demandOption:!0}).option("u",{alias:"userName",default:"mooninlearn",describe:"Name of User",type:"string",demandOption:!0}).option("t",{alias:"template",default:"node",describe:"developemnt template(language)",type:"string"}).option("n",{alias:"repoName",describe:"NameOfRepository",type:"string",demandOption:!0}).option("d",{alias:"description",describe:"Description For Repository",type:"string"}).option("g",{alias:"github",default:!0,describe:"Use Github Repository",type:"boolean"}).parseSync(),l={exec:p.e,userName:p.u,template:p.t,repoName:p.n,description:p.d,github:p.g},c={encoding:"utf8",shell:"win32"===process.platform?"cmd.exe":"/bin/sh"},m=(0,s.findGithubAccount)(l.userName);if("init"===l.exec)switch(l.template){case"node-simple":case"python-pipenv":break;case"ts-swc-npm":(e=>{if("win"===r)console.log("win");else{(0,t.execSync)(`cp -r ${a}/ts-swc-npm ${l.repoName}`,c);let s=(0,t.execSync)("pwd",c).toString().trim(),o=i.default.dirname(s);(0,n.substituteInFile)(`${l.repoName}/package.json`,{"{{name}}":l.repoName,"{{author}}":`${e.fullName} <${e.email}>`,"{{description}}":l.description||""}),(0,n.substituteInFile)(`${l.repoName}/README.md`,{"{{name}}":l.repoName,"{{author}}":`${e.fullName} <${e.email}>`,"{{github-id}}":e.userName,"{{description}}":l.description||"","{{parent-dir}}":o}),(0,t.execSync)(`cd ${l.repoName} && npm install`,c)}})(m)}else console.log("Invalid command");