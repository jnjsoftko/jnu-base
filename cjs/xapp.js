#!/usr/bin/env node
"use strict";var e,i;Object.defineProperty(exports,"__esModule",{value:!0});const o=(e=require("yargs"))&&e.__esModule?e:{default:e},t=require("child_process"),s=require("./builtin"),n=require("./github"),a=`${process.env.DEV_CONFIG_ROOT}/Templates`??"C:/JnJ-soft/Developments/Templates",r="win32"===process.platform?"win":"darwin"===process.platform?"mac":"linux"===process.platform?"linux":process.platform,p=o.default.usage("Usage: -e <command> -u <userName> -t <template> -n <repoName> -d <description> -g").option("e",{alias:"exec",describe:"Execute Command",type:"string",demandOption:!0}).option("u",{alias:"userName",default:"mooninlearn",describe:"Name of User",type:"string",demandOption:!0}).option("t",{alias:"template",default:"node",describe:"developemnt template(language)",type:"string"}).option("n",{alias:"repoName",describe:"NameOfRepository",type:"string",demandOption:!0}).option("d",{alias:"description",describe:"Description For Repository",type:"string"}).option("g",{alias:"github",default:!0,describe:"Use Github Repository",type:"boolean"}).parseSync(),l={exec:p.e,userName:p.u,template:p.t,repoName:p.n,description:p.d,github:p.g},c={encoding:"utf8",shell:"win32"===process.platform?"cmd.exe":"/bin/sh"},m=(e,i)=>{let o=(0,s.loadFile)(e);for(let[e,t]of Object.entries(i))o=o.replace(e,t);(0,s.saveFile)(e,o)},d=(0,n.findGithubAccount)(l.userName);if("init"===l.exec)switch(l.template){case"node-simple":case"python-pipenv":break;case"ts-swc-npm":;i=d,"win"===r?console.log("win"):((0,t.execSync)(`cp -r ${a}/ts-swc-npm ${l.repoName}`,c),m(`${l.repoName}/package.json`,{"{{name}}":l.repoName,"{{author}}":`${i.fullName} <${i.email}>`,"{{description}}":l.description||""}),m(`${l.repoName}/README.md`,{"{{name}}":l.repoName,"{{version}}":"1.0.0","{{description}}":l.description||""}),(0,t.execSync)(`cd ${l.repoName} && npm install`,c))}else console.log("Invalid command");