"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(exports,{cloneRepo:function(){return s},copyRepo:function(){return l},createRepo:function(){return c},deleteRepo:function(){return p},emptyRepo:function(){return m},findAllRepos:function(){return r},findGithubAccount:function(){return o},initRepo:function(){return a},makeRepo:function(){return f},pushRepo:function(){return g},removeRepo:function(){return d},setConfigRepo:function(){return u}});const e=require("child_process"),t=require("./builtin.js"),n=require("./basic.js"),i=`${process.env.DEV_CONFIG_ROOT}/Environments`??"C:/JnJ-soft/Developments/Environments",o=e=>(0,t.loadJson)(`${i}/Apis/github.json`)[e],r=e=>{console.log(e.rest.repos)},c=(e,t)=>e.rest.repos.createForAuthenticatedUser({auto_init:!0,private:!1,license_template:"MIT",...t}),s=(t,n)=>{let i=`git clone https://github.com/${t}/${n.name}.git`;console.log(i),(0,e.execSync)(i)},u=(t,n)=>{let i=`cd ${t.name} && git config user.name "${n.fullName}"`;console.log(i+=` && git config user.email "${n.email}" && git remote set-url origin https://${n.token}@github.com/${n.userName}/${t.name}.git`),(0,e.execSync)(i)},l=(e,t,n)=>{s(t,e),u(e,n)},a=async(e,t,i,o)=>{await c(o,e),await (0,n.sleep)(5e3),s(t,e),u(e,i)},g=(t,i)=>{let{name:o}=t,{fullName:r,email:c,token:s,userName:u}=i;(0,n.sleep)(3);let l="git init";console.log(l+=` && git config user.name "${r}" && git config user.email "${c}" && git remote add origin https://${s}@github.com/${u}/${o}.git`),(0,e.execSync)(l),console.log(l='git add . && git commit -m "Initial commit"'),(0,e.execSync)(l);let a=(0,e.execSync)("git branch");a.includes("main")?(0,e.execSync)("git push -u origin main"):a.includes("master")?(0,e.execSync)("git push -u origin master"):console.log("main 또는 master 브랜치가 없습니다.")},p=(e,t,n)=>{let{name:i}=n;return e.rest.repos.delete({owner:t,repo:i})},m=(e,t)=>c(e,{...t,auto_init:!1,license_template:void 0}),f=async(e,t,i,o)=>{await m(o,e),await (0,n.sleep)(3),g(e,i)},d=(t,n,i)=>{p(t,n,i);let{name:o}=i,r=`rm -rf ${o}`;console.log(r),(0,e.execSync)(r)};