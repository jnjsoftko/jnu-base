#!/usr/bin/env node
"use strict";var e,o;let r;Object.defineProperty(exports,"__esModule",{value:!0});const t=require("@octokit/rest"),i=(o=require("yargs"))&&o.__esModule?o:{default:o},a=require("./git.js"),p=require("./cli.js"),s=i.default.usage("Usage: -u <url> -s <keyword>").option("e",{alias:"exec",default:"copyRepo",describe:"exec command copyRepo(clone+local config)/makeRepo(create remote+push)/removeRepo(delete remote+local)",type:"string",demandOption:!0}).option("u",{alias:"userName",default:"mooninlearn",describe:"Name of User",type:"string"}).option("n",{alias:"repoName",describe:"NameOfRepository",type:"string"}).option("d",{alias:"description",describe:"Description For Repository",type:"string"}).argv,c=(0,a.findGithubAccount)(s.userName??"");c.userName=s.userName??"",console.log(`#### git account: ${JSON.stringify(c)}`);const n=new t.Octokit({auth:c.token}),m=(e=s.repoName??"",(r=(0,p.getCurrentDir)()).split("/").pop()!==e&&(r+=`/${e}`),r??"");switch(s.exec){case"createRemoteRepo":(0,a.createRemoteRepo)(n,{name:s.repoName??"",description:s.description??""});break;case"createRemoteRepoEmpty":(0,a.createRemoteRepoEmpty)(n,{name:s.repoName??"",description:s.description??""});break;case"deleteRemoteRepo":(0,a.deleteRemoteRepo)(n,{name:s.repoName??""},c);break;case"setLocalConfig":(0,a.setLocalConfig)({name:s.repoName??"",description:s.description??""},c,m);break;case"initLocalRepo":case"initRepo":(0,a.initLocalRepo)({name:s.repoName??"",description:s.description??""},c,m);break;case"pushRepo":(0,a.pushRepo)({name:s.repoName??"",description:s.description??""},c,m);break;case"copyRepo":(0,a.copyRepo)({name:s.repoName??"",description:s.description??"description"},c,m);break;case"makeRepo":(0,a.makeRepo)(n,{name:s.repoName??"",description:s.description??""},c,m);break;case"removeRepo":(0,a.removeRepo)(n,{name:s.repoName??""},c,m)}