import e from"path";import{execSync as t}from"child_process";import{loadJson as o}from"./builtin.js";import{sleep as i}from"./basic.js";let n=`${process.env.DEV_CONFIG_ROOT}/Environments`??"C:/JnJ-soft/Developments/Environments",r=e=>o(`${n}/Apis/github.json`)[e],s=e=>{console.log(e.rest.repos)},a=(e,t)=>e.rest.repos.createForAuthenticatedUser({auto_init:!0,private:!1,license_template:"MIT",...t}),m=(e,t)=>a(e,{...t,auto_init:!1,license_template:void 0}),l=(e,t,o)=>{let{name:i}=t;return e.rest.repos.delete({owner:o.userName,repo:i})},c=(e,o,i)=>{let n=`cd ${i} && git config user.name "${o.fullName}"`;console.log(n+=` && git config user.email "${o.email}" && git remote set-url origin https://${o.token}@github.com/${o.userName}/${e.name}.git`),t(n)},p=(e,o,i)=>{let{name:n}=e,{fullName:r,email:s,token:a,userName:m}=o,l=`cd ${i} && git init`;console.log(l+=` && git config user.name "${r}" && git config user.email "${s}" && git remote add origin https://${a}@github.com/${m}/${n}.git`),t(l)},g=(e,o,i)=>{let n=`cd ${i} && git clone https://github.com/${o.userName}/${e.name}.git .`;console.log(n),t(n)},u=(e,t,o)=>{g(e,t,o),c(e,t,o)},$=async(e,t,o,n)=>{await a(e,t),await i(5e3),g(t,o,n),c(t,o,n)},d=(e,o,i)=>{t(`cd ${i}`);let n=t("git branch");n.includes("main")?t("git push -u origin main"):n.includes("master")?t("git push -u origin master"):console.log("main 또는 master 브랜치가 없습니다.")},h=async(e,o,n,r)=>{await m(e,o),await i(2),p(o,n,r),await i(1),t(`cd ${r}`),d(o,n,r)},f=(o,i,n,r)=>{l(o,i,n);let{name:s}=i;t(`cd ${e.dirname(r)}`);let a=`rm -rf ${s}`;console.log(a),t(a)};export{r as findGithubAccount,s as findAllRepos,a as createRemoteRepo,g as cloneRepo,c as setLocalConfig,u as copyRepo,$ as initRepo,d as pushRepo,l as deleteRemoteRepo,h as makeRepo,m as createRemoteRepoEmpty,f as removeRepo};