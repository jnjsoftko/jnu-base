import{execSync as e}from"child_process";import{loadJson as t}from"./builtin.js";import{sleep as o}from"./basic.js";let i=`${process.env.DEV_CONFIG_ROOT}/Environments`??"C:/JnJ-soft/Developments/Environments",n=e=>t(`${i}/Apis/github.json`)[e],s=e=>{console.log(e.rest.repos)},r=(e,t)=>e.rest.repos.createForAuthenticatedUser({auto_init:!0,private:!1,license_template:"MIT",...t}),l=(t,o)=>{let i=`git clone https://github.com/${t}/${o.name}.git`;console.log(i),e(i)},m=(t,o)=>{let i=`cd ${t.name} && git config user.name "${o.fullName}"`;console.log(i+=` && git config user.email "${o.email}" && git remote set-url origin https://${o.token}@github.com/${o.userName}/${t.name}.git`),e(i)},a=(e,t,o)=>{l(t,e),m(e,o)},c=async(e,t,i,n)=>{await r(n,e),await o(5e3),l(t,e),m(e,i)},g=(t,i)=>{let{name:n}=t,{fullName:s,email:r,token:l,userName:m}=i;o(3);let a="git init";console.log(a+=` && git config user.name "${s}" && git config user.email "${r}" && git remote add origin https://${l}@github.com/${m}/${n}.git`),e(a),console.log(a='git add . && git commit -m "Initial commit"'),e(a);let c=e("git branch");c.includes("main")?e("git push -u origin main"):c.includes("master")?e("git push -u origin master"):console.log("main 또는 master 브랜치가 없습니다.")},p=(e,t,o)=>{let{name:i}=o;return e.rest.repos.delete({owner:t,repo:i})},u=(e,t)=>r(e,{...t,auto_init:!1,license_template:void 0}),$=async(e,t,i,n)=>{e.userName=t,await u(n,e),await o(3),g(e,i)},d=(t,o,i)=>{p(t,o,i);let{name:n}=i,s=`rm -rf ${n}`;console.log(s),e(s)};export{n as findGithubAccount,s as findAllRepos,r as createRepo,l as cloneRepo,m as setConfigRepo,a as copyRepo,c as initRepo,g as pushRepo,p as deleteRepo,$ as makeRepo,u as emptyRepo,d as removeRepo};