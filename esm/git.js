import e from"path";import{execSync as o}from"child_process";import{loadJson as t}from"./builtin.js";import{sleep as i}from"./basic.js";import{PLATFORM as n}from"./cli.js";let s=`${process.env.DEV_CONFIG_ROOT}/Environments`??"C:/JnJ-soft/Developments/Environments",l=e=>t(`${s}/Apis/github.json`)[e],r=e=>{console.log(e.rest.repos)},m=(e,o)=>e.rest.repos.createForAuthenticatedUser({auto_init:!0,private:!1,license_template:"MIT",...o}),c=(e,o)=>m(e,{...o,auto_init:!1,license_template:void 0}),p=(e,o,t)=>{let{name:i}=o;return e.rest.repos.delete({owner:t.userName,repo:i})},a=(e,t,i)=>{let n=`cd ${i} && git config user.name "${t.fullName}"`;console.log(n+=` && git config user.email "${t.email}" && git remote set-url origin https://${t.token}@github.com/${t.userName}/${e.name}.git`),o(n)},g=(e,t,i)=>{let{name:n}=e,{fullName:s,email:l,token:r,userName:m}=t,c=`cd ${i} && git init`;console.log(c+=` && git config user.name "${s}" && git config user.email "${l}" && git remote add origin https://${r}@github.com/${m}/${n}.git && git add . && git commit -m "Initial commit"`),o(c)},u=(t,i,n)=>{let s=`cd ${e.dirname(n)} && git clone https://github.com/${i.userName}/${t.name}.git`;console.log(s),o(s)},$=(e,o,t,n)=>{m(e,o),i(5e3),u(o,t,n),a(o,t,n)},d=(e,o,t)=>{u(e,o,t),a(e,o,t)},R=(e,t,i)=>{o(`cd ${i}`);let n=o("git branch");console.log(`#### pushRepo branches: ${n}`),n.includes("main")?o("git push -u origin main"):n.includes("master")?o("git push -u origin master"):console.log("main 또는 master 브랜치가 없습니다.")},h=(e,o,t,n)=>{console.log(`=================== createRemoteRepoEmpty: ${n}`),c(e,o),i(5),console.log(`=================== initLocalRepo: ${n}`),g(o,t,n),i(3),console.log(`=================== pushRepo: ${n}`),R(o,t,n)},f=(t,i,s,l)=>{p(t,i,s);let{name:r}=i;if(o(`cd ${e.dirname(l)}`),"win"===n){let e=`rmdir /s /q ${r}`;console.log(e),o(e)}else{let e=`rm -rf ${r}`;console.log(e),o(e)}};export{l as findGithubAccount,r as findAllRepos,m as createRemoteRepo,c as createRemoteRepoEmpty,p as deleteRemoteRepo,u as cloneRepo,a as setLocalConfig,g as initLocalRepo,$ as initRepo,d as copyRepo,R as pushRepo,h as makeRepo,f as removeRepo};