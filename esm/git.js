import e from"path";import{execSync as o}from"child_process";import{loadJson as t}from"./builtin.js";import{sleep as i}from"./basic.js";import{PLATFORM as n}from"./cli.js";let s=`${process.env.DEV_CONFIG_ROOT}/Environments`??"C:/JnJ-soft/Developments/Environments",r=e=>t(`${s}/Apis/github.json`)[e],l=e=>{console.log(e.rest.repos)},m=(e,o)=>e.rest.repos.createForAuthenticatedUser({auto_init:!0,private:!1,license_template:"MIT",...o}),c=(e,o)=>m(e,{...o,auto_init:!1,license_template:void 0}),p=(e,o,t)=>{let{name:i}=o;return e.rest.repos.delete({owner:t.userName,repo:i})},g=(e,t,i)=>{let n=`cd ${i} && git config user.name "${t.fullName}"`;console.log(n+=` && git config user.email "${t.email}" && git remote set-url origin https://${t.token}@github.com/${t.userName}/${e.name}.git`),o(n)},a=(e,t,i)=>{let{name:n}=e,{fullName:s,email:r,token:l,userName:m}=t,c=`cd ${i} && git init`;console.log(c+=` && git config user.name "${s}" && git config user.email "${r}" && git remote add origin https://${l}@github.com/${m}/${n}.git`),o(c)},u=(t,i,n)=>{let s=`cd ${e.dirname(n)} && git clone https://github.com/${i.userName}/${t.name}.git`;console.log(s),o(s)},$=(e,o,t)=>{u(e,o,t),g(e,o,t)},d=(e,o,t,n)=>{m(e,o),i(5e3),u(o,t,n),g(o,t,n)},R=(e,t,i)=>{o(`cd ${i}`);let n=o("git branch");console.log(`#### pushRepo branches: ${n}`),n.includes("main")?o("git push -u origin main"):n.includes("master")?o("git push -u origin master"):console.log("main 또는 master 브랜치가 없습니다.")},h=(e,o,t,n)=>{console.log(`=================== createRemoteRepoEmpty: ${n}`),c(e,o),i(5),console.log(`=================== initLocalRepo: ${n}`),a(o,t,n),i(3),console.log(`=================== pushRepo: ${n}`),R(o,t,n)},f=(t,i,s,r)=>{p(t,i,s);let{name:l}=i;if(o(`cd ${e.dirname(r)}`),"win"===n){let e=`rmdir /s /q ${l}`;console.log(e),o(e)}else{let e=`rm -rf ${l}`;console.log(e),o(e)}};export{r as findGithubAccount,l as findAllRepos,m as createRemoteRepo,u as cloneRepo,g as setLocalConfig,$ as copyRepo,d as initRepo,R as pushRepo,p as deleteRemoteRepo,h as makeRepo,c as createRemoteRepoEmpty,f as removeRepo};